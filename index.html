function confirmMatch(rIdx, mIdx) {
    const s1 = parseInt(document.getElementById(`s1-${rIdx}-${mIdx}`).value);
    const s2 = parseInt(document.getElementById(`s2-${rIdx}-${mIdx}`).value);
    
    if (isNaN(s1) || isNaN(s2)) return alert("سجل الأهداف أولاً!");
    if (prompt("أدخل كلمة السر:") !== SECRET_KEY) return alert("كلمة سر خاطئة!");

    // الحصول على التاريخ الميلادي الحالي
    const now = new Date();
    const dateStr = `${now.getFullYear()}/${now.getMonth() + 1}/${now.getDate()}`;

    // إرسال النتيجة مع التاريخ إلى Firebase
    db.ref(`league/${rIdx}/${mIdx}`).update({ 
        s1, 
        s2, 
        confirmed: true,
        date: dateStr // إضافة حقل التاريخ
    });
}
