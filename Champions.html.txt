<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¯ÙˆØ±ÙŠ Ø§Ù„Ù…Ø­ØªØ±ÙÙŠÙ† Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background-color: #0f172a; color: white; overflow-x: hidden; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        input[type="number"] { background: #1e293b; color: #fbbf24; border: none; outline: none; text-align: center; font-weight: 900; border-radius: 8px; }
        .final-input { border: 2px solid #fbbf24 !important; background: #0f172a !important; width: 50px; height: 40px; font-size: 1.2rem; }
    </style>
</head>
<body class="p-3 pb-10">
    <div class="max-w-md mx-auto space-y-4">
        
        <div class="flex justify-around items-center py-3 glass rounded-2xl shadow-lg border-b-2 border-amber-500">
            <div id="hist-Ø£Ø­Ù…Ø¯" class="text-center"><p class="text-[10px] text-slate-400">Ø£Ø­Ù…Ø¯</p><p class="text-xl font-black text-amber-500">0</p></div>
            <div id="hist-Ù…Ø´Ø¹Ù„" class="text-center"><p class="text-[10px] text-slate-400">Ù…Ø´Ø¹Ù„</p><p class="text-xl font-black text-amber-500">0</p></div>
            <div id="hist-ÙÙŠØµÙ„" class="text-center"><p class="text-[10px] text-slate-400">ÙÙŠØµÙ„</p><p class="text-xl font-black text-amber-500">0</p></div>
        </div>

        <div class="glass rounded-2xl overflow-hidden shadow-2xl">
            <table class="w-full text-xs text-center">
                <thead class="bg-white/10 text-amber-400">
                    <tr>
                        <th class="p-3 text-right">Ø§Ù„Ù„Ø§Ø¹Ø¨</th>
                        <th class="p-3">Ù„Ø¹Ø¨</th>
                        <th class="p-3 font-black text-sm text-indigo-400">Ù†Ù‚Ø§Ø·</th>
                    </tr>
                </thead>
                <tbody id="leagueBody" class="divide-y divide-white/5 font-bold"></tbody>
            </table>
        </div>

        <div id="leagueSection" class="space-y-2">
            <h3 class="text-xs font-bold text-slate-400 px-1">âš½ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø§Ù„Ø¯ÙˆØ±ÙŠ</h3>
            <div id="matchesList" class="grid gap-2 text-sm"></div>
        </div>

        <div id="finalSection" class="hidden space-y-3 p-4 glass rounded-3xl border-2 border-amber-500 bg-amber-500/5">
            <h3 class="text-center text-amber-500 font-black text-sm tracking-widest">ğŸ† Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ø³Ù…</h3>
            
            <div class="flex flex-col items-center gap-2 p-3 bg-white/5 rounded-xl">
                <span class="text-[10px] text-slate-400 uppercase">1. Ù…Ø¨Ø§Ø±Ø§Ø© Ø§Ù„Ù…Ù„Ø­Ù‚ (ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø«Ø§Ù†ÙŠ)</span>
                <div class="flex items-center gap-4">
                    <span id="p2" class="font-bold"></span>
                    <div class="flex gap-1">
                        <input type="number" id="playoff1" class="final-input" oninput="checkFinal()">
                        <input type="number" id="playoff2" class="final-input" oninput="checkFinal()">
                    </div>
                    <span id="p3" class="font-bold text-left"></span>
                </div>
            </div>

            <div id="finalMatchUI" class="hidden flex flex-col items-center gap-2 p-3 bg-amber-500/10 rounded-xl border border-amber-500/30">
                <span class="text-[10px] text-amber-500 font-bold uppercase">2. Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø§Ù„ÙƒØ¨ÙŠØ± ğŸ‘‘</span>
                <div class="flex items-center gap-4">
                    <span id="p1" class="font-black text-amber-500 text-lg"></span>
                    <div class="flex gap-1">
                        <input type="number" id="fScore1" class="final-input" oninput="checkFinal()">
                        <input type="number" id="fScore2" class="final-input" oninput="checkFinal()">
                    </div>
                    <span id="winnerPlayoff" class="font-black text-white">ØŸ</span>
                </div>
            </div>
        </div>

    </div>

<script>
    let players = { "Ø£Ø­Ù…Ø¯": { history: 0, pts: 0, diff: 0, played: 0 }, "Ù…Ø´Ø¹Ù„": { history: 0, pts: 0, diff: 0, played: 0 }, "ÙÙŠØµÙ„": { history: 0, pts: 0, diff: 0, played: 0 } };
    const matches = [["Ø£Ø­Ù…Ø¯","Ù…Ø´Ø¹Ù„"],["Ù…Ø´Ø¹Ù„","ÙÙŠØµÙ„"],["ÙÙŠØµÙ„","Ø£Ø­Ù…Ø¯"],["Ù…Ø´Ø¹Ù„","Ø£Ø­Ù…Ø¯"],["ÙÙŠØµÙ„","Ù…Ø´Ø¹Ù„"],["Ø£Ø­Ù…Ø¯","ÙÙŠØµÙ„"]];
    let sorted = [];

    function setup() {
        let h = '';
        matches.forEach((m, i) => {
            h += `<div class="glass p-3 rounded-xl flex items-center justify-between">
                <span class="w-16 font-bold text-slate-300">${m[0]}</span>
                <div class="flex items-center gap-2">
                    <input type="number" class="w-10 h-8 league-in" oninput="calculate()">
                    <span class="text-slate-600">Ã—</span>
                    <input type="number" class="w-10 h-8 league-in" oninput="calculate()">
                </div>
                <span class="w-16 text-left font-bold text-slate-300">${m[1]}</span>
            </div>`;
        });
        document.getElementById('matchesList').innerHTML = h;
        calculate();
    }

    function calculate() {
        for (let p in players) { players[p].pts=0; players[p].diff=0; players[p].played=0; }
        const ins = document.querySelectorAll('.league-in');
        let done = 0;
        matches.forEach((m, i) => {
            let g1 = parseInt(ins[i*2].value), g2 = parseInt(ins[i*2+1].value);
            if (!isNaN(g1) && !isNaN(g2)) {
                done++; players[m[0]].played++; players[m[1]].played++;
                players[m[0]].diff += (g1 - g2); players[m[1]].diff += (g2 - g1);
                if (g1 > g2) players[m[0]].pts += 3; else if (g2 > g1) players[m[1]].pts += 3; else { players[m[0]].pts += 1; players[m[1]].pts += 1; }
            }
        });

        sorted = Object.keys(players).sort((a,b) => players[b].pts - players[a].pts || players[b].diff - players[a].diff);
        
        if(done === 6) {
            document.getElementById('finalSection').classList.remove('hidden');
            document.getElementById('p1').innerText = sorted[0];
            document.getElementById('p2').innerText = sorted[1];
            document.getElementById('p3').innerText = sorted[2];
        } else {
            document.getElementById('finalSection').classList.add('hidden');
        }
        render();
    }

    function checkFinal() {
        let ps1 = parseInt(document.getElementById('playoff1').value);
        let ps2 = parseInt(document.getElementById('playoff2').value);
        let winP = "";

        if (!isNaN(ps1) && !isNaN(ps2)) {
            winP = ps1 > ps2 ? sorted[1] : sorted[2];
            document.getElementById('winnerPlayoff').innerText = winP;
            document.getElementById('finalMatchUI').classList.remove('hidden');
        }

        let fs1 = parseInt(document.getElementById('fScore1').value);
        let fs2 = parseInt(document.getElementById('fScore2').value);

        if (!isNaN(fs1) && !isNaN(fs2) && winP !== "") {
            let absoluteWinner = fs1 > fs2 ? sorted[0] : winP;
            setTimeout(() => {
                alert("ğŸ† Ù…Ø¨Ø±ÙˆÙƒ! Ø§Ù„Ø¨Ø·Ù„ Ù‡Ùˆ: " + absoluteWinner);
                players[absoluteWinner].history++;
                resetSeason();
            }, 500);
        }
    }

    function resetSeason() {
        document.querySelectorAll('input').forEach(i => i.value = '');
        document.getElementById('finalMatchUI').classList.add('hidden');
        calculate();
    }

    function render() {
        let h = '';
        sorted.forEach(n => {
            h += `<tr><td class="p-3 text-right border-r-4 border-amber-500/30">${n}</td><td class="p-3">${players[n].played}</td><td class="p-3 text-indigo-400 font-black">${players[n].pts}</td></tr>`;
            document.querySelector(`#hist-${n} p:last-child`).innerText = players[n].history;
        });
        document.getElementById('leagueBody').innerHTML = h;
    }

    setup();
</script>
</body>
</html>
